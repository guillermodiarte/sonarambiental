<!DOCTYPE html>
<html lang="es">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Contacto - SonarAmbiental</title>
  <meta name="description" content="Cont√°ctese con SonarAmbiental. Asesoramiento profesional en Mendoza.">
  <link rel="icon" type="image/x-icon" href="img/favicon.ico">

  <!-- Open Graph / WhatsApp Preview -->
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://sonarambiental.com/contacto.html">
  <meta property="og:title" content="Contacto - SonarAmbiental">
  <meta property="og:description"
    content="P√≥ngase en contacto con nosotros para consultor√≠a y servicios ambientales en Mendoza.">
  <meta property="og:image" content="https://sonarambiental.com/img/logo_sq.png">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&family=Outfit:wght@500;700&display=swap"
    rel="stylesheet">
  <!-- Font Awesome -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
  <link rel="stylesheet" href="css/style.css">
  <style>
    .contact-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: var(--spacing-lg);
    }

    @media (max-width: 768px) {
      .contact-grid {
        grid-template-columns: 1fr;
      }
    }

    .form-group {
      margin-bottom: 1.5rem;
    }

    .form-label {
      display: block;
      margin-bottom: 0.5rem;
      font-weight: 500;
    }

    .form-input,
    .form-textarea {
      width: 100%;
      padding: 0.8rem;
      border: 1px solid #ddd;
      border-radius: var(--radius-sm);
      font-family: var(--font-body);
      font-size: 1rem;
    }

    .form-input:focus,
    .form-textarea:focus {
      outline: none;
      border-color: var(--secondary-color);
      box-shadow: 0 0 0 3px rgba(76, 167, 214, 0.1);
    }

    .map-container {
      height: 400px;
      border-radius: var(--radius-md);
      overflow: hidden;
      box-shadow: var(--shadow-soft);
    }

    /* Modal Styles */
    .modal-overlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.6);
      display: none;
      justify-content: center;
      align-items: center;
      z-index: 2000;
      backdrop-filter: blur(4px);
      transition: opacity 0.3s ease;
    }

    .modal-content {
      background: white;
      padding: 2.5rem;
      border-radius: var(--radius-md);
      max-width: 500px;
      width: 90%;
      text-align: center;
      position: relative;
      box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
      transform: translateY(20px);
      transition: transform 0.3s ease;
    }

    .modal-overlay.active {
      display: flex;
    }

    .modal-overlay.active .modal-content {
      transform: translateY(0);
    }

    .modal-icon {
      font-size: 4rem;
      color: #28a745;
      margin-bottom: 1rem;
    }

    .modal-title {
      font-family: var(--font-heading);
      font-size: 2rem;
      color: var(--primary-color);
      margin-bottom: 1rem;
    }

    .modal-text {
      font-size: 1.1rem;
      color: #666;
      margin-bottom: 2rem;
      line-height: 1.6;
    }

    .modal-btn {
      width: 100%;
      padding: 1rem;
    }
  </style>
  <!-- Google tag (gtag.js) -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=AW-17963828051"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag() { dataLayer.push(arguments); }
    gtag('js', new Date());

    gtag('config', 'AW-17963828051');
  </script>

  <script src="https://www.google.com/recaptcha/api.js" async defer></script>
</head>

<body>

  <header class="header">
    <div class="container nav-container">
      <a href="index.html" class="logo-link">
        <!-- V2 Logo -->
        <img src="img/logo_v3.png" alt="SonarAmbiental Logo" class="logo">
      </a>

      <button class="mobile-menu-btn" aria-label="Men√∫">‚ò∞</button>

      <nav>
        <ul class="nav-links">
          <li><a href="index.html" class="nav-link">Inicio</a></li>
          <li><a href="nosotros.html" class="nav-link">Nosotros</a></li>
          <li><a href="servicios.html" class="nav-link">Servicios</a></li>
          <li><a href="proyectos.html" class="nav-link">Proyectos</a></li>
          <li><a href="contacto.html" class="nav-link active">Contacto</a></li>
          <li>
            <a href="https://api.whatsapp.com/send?phone=5492612515849&text=Hola,%20quiero%20solicitar%20asesoramiento%20en%20consultor%C3%ADa%20ambiental"
              target="_blank" class="btn-whatsapp" aria-label="Chat on WhatsApp">
              <i class="fab fa-whatsapp"></i> ESCRIBINOS
            </a>
          </li>
        </ul>
      </nav>
    </div>
  </header>

  <section class="section bg-off-white" style="padding-top: 120px;">
    <div class="container">
      <div class="section-title">
        <h1>Contacto</h1>
        <p>Estamos listos para ayudar a su empresa a crecer de manera sostenible.</p>
      </div>

      <div class="contact-grid">

        <!-- Contact Form -->
        <div
          style="background: white; padding: var(--spacing-md); border-radius: var(--radius-md); box-shadow: var(--shadow-soft);">
          <h2 class="text-primary" style="font-size: 1.8rem;">Env√≠enos un mensaje</h2>

          <form id="contactForm" action="procesar_formulario.php" method="POST">

            <!-- Honeypot invisible anti bots -->
            <input type="text" name="empresa_web" style="display:none">

            <div class="form-group">
              <label class="form-label">Nombre y Apellido *</label>
              <input type="text" name="nombre" class="form-input" required>
            </div>

            <div class="form-group">
              <label class="form-label">Empresa (Opcional)</label>
              <input type="text" name="empresa" class="form-input">
            </div>

            <div class="form-group">
              <label class="form-label">Email *</label>
              <input type="email" name="email" class="form-input" required>
            </div>

            <div class="form-group">
              <label class="form-label">Tel√©fono *</label>
              <input type="tel" name="telefono" class="form-input" required>
            </div>

            <div class="form-group">
              <label class="form-label">Tipo de servicio requerido *</label>
              <select name="servicio" class="form-input" required>
                <option value="">Seleccione una opci√≥n</option>
                <option>Estudio de Impacto Ambiental</option>
                <option>Gesti√≥n de Residuos Peligrosos</option>
                <option>Habilitaci√≥n Ambiental</option>
                <option>Plan de Gesti√≥n Ambiental</option>
                <option>Otro</option>
              </select>
            </div>

            <div class="form-group">
              <label class="form-label">Detalle de la consulta *</label>
              <textarea name="mensaje" rows="5" class="form-textarea" required></textarea>
            </div>

            <!-- reCAPTCHA -->
            <div class="form-group">
              <div class="g-recaptcha" data-sitekey="6LcwRXEsAAAAAOAnSxfTzR1DHs0oQRIUnhl__bLe">
              </div>
            </div>

            <button id="submitBtn" type="submit" class="btn btn-primary" style="width: 100%;">
              Solicitar Asesoramiento
            </button>

          </form>

        </div>

        <!-- Info & Map -->
        <div class="flex flex-col gap-md">
          <div>
            <h2 class="text-primary" style="font-size: 1.8rem;">Informaci√≥n</h2>
            <ul style="margin-top: 1rem; list-style: none;">
              <li style="margin-bottom: 1rem; display: flex; align-items: center; gap: 10px;">
                <span style="font-size: 1.5rem;">‚úâÔ∏è</span>
                <div>
                  <strong>Email:</strong><br>
                  mariadelapazacosta87@gmail.com
                </div>
              </li>
              <li style="margin-bottom: 1rem; display: flex; align-items: center; gap: 10px;">
                <span style="font-size: 1.5rem;">üì±</span>
                <div>
                  <strong>Tel√©fono / WhatsApp:</strong><br>
                  +54 9 2612 51-5849
                </div>
              </li>
            </ul>

            <!-- Premium WhatsApp CTA Between Info and Map -->
            <div style="margin: 1.5rem 0;">
              <a href="https://api.whatsapp.com/send?phone=5492612515849&text=Hola,%20quiero%20solicitar%20asesoramiento%20en%20consultor%C3%ADa%20ambiental"
                target="_blank" class="btn"
                style="width: 100%; justify-content: center; display: flex; align-items: center; gap: 10px; background-color: #25D366; color: white; border: none; font-size: 1.1rem; padding: 1rem; border-radius: var(--radius-md); box-shadow: var(--shadow-soft); transition: transform 0.2s, box-shadow 0.2s;">
                <i class="fab fa-whatsapp" style="font-size: 1.5rem;"></i>
                <span>Enviar Mensaje por WhatsApp</span>
              </a>
            </div>

          </div>
        </div>
      </div>
    </div>
  </section>

  <footer class="footer">
    <div class="container">
      <div class="footer-content">
        <div class="footer-column">
          <img src="img/logo_v3.png" alt="SonarAmbiental"
            style="height: 40px; filter: brightness(0) invert(1); margin-bottom: 1rem;">
          <p>Consultora de Gesti√≥n Ambiental comprometida con el desarrollo sostenible de Mendoza.</p>
        </div>
        <div class="footer-column">
          <h3>Contacto</h3>
          <ul class="footer-links">
            <li>üìç Mendoza, Argentina</li>
            <li>‚úâÔ∏è info@sonarambiental.com</li>
          </ul>
        </div>
        <div class="footer-column">
          <h3>Enlaces</h3>
          <ul class="footer-links">
            <li><a href="nosotros.html">Sobre Nosotros</a></li>
            <li><a href="servicios.html">Servicios</a></li>
            <li><a href="proyectos.html">Proyectos</a></li>
            <li><a href="contacto.html">Contacto</a></li>
          </ul>
        </div>
      </div>
      <div class="footer-bottom">
        &copy; 2026 SonarAmbiental. Todos los derechos reservados.
      </div>
    </div>
  </footer>
  <!-- Modal -->
  <div id="thanksModal" class="modal-overlay">
    <div class="modal-content">
      <div class="modal-icon">
        <i class="fas fa-check-circle"></i>
      </div>
      <h2 class="modal-title">¬°Muchas Gracias!</h2>
      <p class="modal-text">
        Su consulta ha sido enviada correctamente.<br>
        Nos comunicaremos con usted a la brevedad.
      </p>
      <button id="closeModal" class="btn btn-primary modal-btn">Aceptar</button>
    </div>
  </div>

  <script src="js/script.js"></script>
  <script>
    document.addEventListener('DOMContentLoaded', () => {
      const form = document.getElementById('contactForm');
      const submitBtn = document.getElementById('submitBtn');
      const modal = document.getElementById('thanksModal');
      const closeModal = document.getElementById('closeModal');
      let autoCloseTimeout;

      const showModal = () => {
        modal.classList.add('active');
        autoCloseTimeout = setTimeout(hideModal, 3000);
      };

      const hideModal = () => {
        modal.classList.remove('active');
        if (autoCloseTimeout) clearTimeout(autoCloseTimeout);
        form.reset();
        if (typeof grecaptcha !== 'undefined' && grecaptcha.reset) {
          grecaptcha.reset();
        }
      };

      closeModal.addEventListener('click', hideModal);

      form.addEventListener('submit', async (e) => {
        e.preventDefault();

        // JS validation to ensure all required fields are filled
        const formData = new FormData(form);
        const requiredFields = ['nombre', 'email', 'telefono', 'servicio', 'mensaje'];
        let isValid = true;

        for (const field of requiredFields) {
          const val = formData.get(field);
          if (!val || val.trim() === '') {
            isValid = false;
            break;
          }
        }

        if (!isValid) {
          alert('Por favor complete todos los campos obligatorios.');
          return;
        }

        const email = formData.get('email');
        const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
        if (!emailRegex.test(email)) {
          alert('Por favor ingrese un email v√°lido.');
          return;
        }

        if (typeof grecaptcha !== 'undefined' && grecaptcha.getResponse() === "") {
          alert('Por favor complete el reCAPTCHA.');
          return;
        }

        // Disable button while sending
        const originalText = submitBtn.textContent;
        submitBtn.disabled = true;
        submitBtn.textContent = 'Enviando...';

        try {
          const response = await fetch(form.action, {
            method: 'POST',
            body: formData,
            headers: {
              'Accept': 'application/json' // Explicitly ask for JSON
            }
          });

          // Just to be safe if server has errors and outputs text
          const responseText = await response.text();
          console.log("Raw Server Response:", responseText); // Debugging line

          let result;
          try {
            result = JSON.parse(responseText);
          } catch (err) {
            console.error('Server returned invalid JSON:', responseText);
            throw new Error('Respuesta inv√°lida del servidor');
          }

          if (result.success) {
            showModal();
          } else {
            alert('Error: ' + (result.message || 'Se produjo un error al enviar.'));
          }
        } catch (error) {
          console.error('Fetch Error:', error);
          alert('Hubo un error de conexi√≥n o de servidor. Por favor intente nuevamente.');
        } finally {
          submitBtn.disabled = false;
          submitBtn.textContent = originalText;
        }
      });
    });
  </script>
</body>

</html>